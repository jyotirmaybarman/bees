<div class="fixed top-0 w-full bg-white dark:bg-[#080C21] z-20">
    <nav class="py-3 h-[80px] text-lg flex flex-col justify-center max-w-[1200px] mx-auto px-[4vmin] xl:px-0">
            <div class="top flex justify-between items-center">
                <div class="flex items-center gap-16">
                    <a class="font-bold" href="{{@site.url}}">
                        {{#if @site.logo}}
                            <img src="{{@site.logo}}" alt="{{@site.title}}" />
                        {{else}}
                            {{@site.title}}
                        {{/if}}
                    </a>
                    <div class="hidden lg:block">
                        {{navigation}} 
                    </div>
                </div>
                
                
                <div class="top-left hidden lg:flex items-center gap-2">

                    {{#if @member  }}
                        <div class="click-field relative group inline-block text-left mr-6">
                            <div onclick="showDropdown()" class="flex items-center gap-6 cursor-pointer">
                                <img src="{{@member.avatar_image}}" alt="profile-picture" class="h-8 w-8 rounded-full text-sm flex text-white items-center justify-center dark:bg-white bg-[#333]">
                                <button type="button" class="dark:text-white">{{ @member.name }}</button>
                            </div>
                            <div data-show="false" class="dropdown absolute right-1/2 translate-x-1/2 z-10 mt-4 min-w-[150px] w-full origin-top-right rounded-md bg-white dark:bg-[#2a2a2a] text-gray-700 px-1 dark:text-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none">
                                <div class="py-1" role="none">
                                    <a onclick="showDropdown()" href="/#/portal/account" class="flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-[#3e3e3e] rounded-md px-4 py-2 text-sm">
                                        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                                        </svg>      
                                        <span>Profile</span>
                                    </a>
                                    <a onclick="showDropdown()" href="javascript:" data-members-signout class="flex w-full items-center gap-4 hover:bg-gray-100 dark:hover:bg-[#3e3e3e] rounded-md px-4 py-2 text-sm">
                                        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9" />
                                        </svg>
                                        <span>Logout</span>
                                    </a>
                                </div>
                            </div>
                        </div>

                    {{else if @site.members_enabled}}
                        {{!-- <a class="px-3 p-2 hover:bg-[#E3E8F3] dark:hover:bg-blue-700 rounded-md" href="#/portal/account">Log in</a> --}}
                        <a class="bg-red-500 hover:bg-red-400 dark:hover:bg-red-700 text-white px-4 p-2 rounded-md mr-6" href="#/portal/signin">Login</a>
                    {{/if}}
                    <button data-ghost-search class="p-2 hover:bg-[#E3E8F3] dark:hover:bg-blue-700 rounded-md">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                        </svg>
                    </button>
                    {{> theme-switcher }}
                </div>

                <div class="mobile-hamburger lg:hidden gap-2 flex items-center">
                    <button onclick="toggleSidebar()">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12H12m-8.25 5.25h16.5" />
                        </svg>
                    </button>
                </div>

            </div>
            <div class='progress-bar fixed top-0 left-0 hidden'></div>
            <div onclick="toggleSidebar()" class="backdrop overscroll-contain hidden fixed inset-0 z-20 items-end bg-black bg-opacity-50 lg:hidden"></div>


            <aside class="mobile-sidebar overscroll-contain hidden fixed inset-y-0 z-50 flex-shrink-0 xs:min-w-[250px] xs:w-max w-full right-0 overflow-y-auto bg-[#ffffff] dark:text-white dark:bg-[#080C21] lg:hidden">
                <button
                    onclick="toggleSidebar()"
                    class="absolute top-3 left-3 lg:hidden z-20 flex h-10 w-10 items-center justify-center rounded-md hover:bg-[#E3E8F3] dark:hover:bg-blue-700">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                        class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>

                <div class="pt-20 px-4 h-full relative flex flex-col">
                    <div>
                        {{#if @member}}
                            <!-- Profile -->
                            <div class="flex items-center gap-6">
                                <div class="h-12 w-12 bg-[#333] flex justify-center items-center text-white rounded-full">JB</div>
                                <p>{{ @member.name }}</p>
                            </div>
                            <ul class="ml-2">
                                <li class="mt-6">
                                    <a href="/#/portal/account" class="group py-3 flex items-center gap-6 w-max">
                                        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path>
                                        </svg>
                                        <span class="group-hover:underline group-hover:underline-offset-8">My Profile</span>
                                    </a>
                                </li>
                                <li class="mt-2">
                                    <a href="javascript:" data-members-signout class="group py-3 flex items-center gap-6 w-max">
                                        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9" />
                                        </svg>                                                             
                                        <span class="group-hover:underline group-hover:underline-offset-8">Logout</span>
                                    </a>
                                </li>  
                            </ul>
                            <hr class="border-gray-300 dark:border-[#333] mb-6" />
                        {{/if}}

                        {{navigation}}

                        <hr class="border-gray-300 dark:border-[#333] my-4" />
                    </div>

                    {{#if @site.members_enabled}}

                        {{#unless @member }}
                            <ul class="ml-2">
                                <li class="mt-2">
                                    <a href="#/portal/signin" class="group py-3 flex items-center gap-6 w-max">
                                        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9" />
                                        </svg>
                                                                        
                                        <span class="group-hover:underline group-hover:underline-offset-8">Login</span>
                                    </a>
                                </li>
                                <li class="mt-2">
                                    <a href="#/portal/signup" class="group py-3 flex items-center gap-6 w-max">
                                        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z" />
                                        </svg>
                                                                        
                                        <span class="group-hover:underline group-hover:underline-offset-8">Register</span>
                                    </a>
                                </li>
                            </ul>
                        {{/unless}}

                    {{/if}}

                    <div class="flex flex-col justify-between flex-1">

                        <div class="flex justify-center mt-6">
                            <!-- search -->
                            <button data-ghost-search class="p-2 hover:bg-[#E3E8F3] dark:hover:bg-blue-700 rounded-md">
                                <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                                </svg>
                            </button>
                        </div>

                        <div class="flex justify-center pb-4">
                            <!-- Theme Switcher -->
                            {{> theme-switcher }}
                        </div>
                    </div>


                </div>

            </aside>
        
    </nav>
</div>

<div class="h-[80px]">

</div>

<script>
    const toggleSidebar = () => {
        let closed = true
        const mobileSidebar = document.querySelector('.mobile-sidebar')
        const backdrop = document.querySelector('.backdrop')
        if(mobileSidebar) {
            closed = mobileSidebar.classList.contains('hidden')
            mobileSidebar.classList.toggle('hidden');
        }
        if(backdrop){
            backdrop.classList.toggle('hidden');
            backdrop.classList.toggle('flex');
        }
        if(closed){
            document.body.style.top = `-${window.scrollY}px`;
            document.body.style.position = 'fixed';
        }else{
            const scrollY = document.body.style.top;
            document.body.style.position = '';
            document.body.style.top = '';
            window.scrollTo(0, parseInt(scrollY || '0') * -1);
        }

    }

    const showDropdown = () => {
        const dropdown = document.querySelector('.dropdown')
        if(dropdown && dropdown.attributes.getNamedItem('data-show').nodeValue == 'true'){
            dropdown.attributes.getNamedItem('data-show').nodeValue = 'false'
        }else{
            dropdown.attributes.getNamedItem('data-show').nodeValue = 'true'
        }
    }
</script>